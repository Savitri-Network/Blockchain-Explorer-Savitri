## Step 4 · Missing Features Required For Production

Per raggiungere lo standard minimo di un block explorer completo sono necessari i seguenti moduli. Ogni riga descrive scopo, I/O atteso, comportamento UI, requisiti backend e criteri di accettazione.

| Feature | Description | Expected Input / Output | UI Behaviour | Backend / API Requirements | Acceptance Criteria |
| --- | --- | --- | --- | --- | --- |
| Block list | Tabellare gli ultimi blocchi con informazioni sintetiche | **Input**: query `GET /api/blocks?page&size&sort` <br> **Output**: JSON `{ items: BlockSummary[], page, total }` | Tabella con colonne (#, hash, timestamp, producer, tx count). Aggiornamento live opzionale | Endpoint aggregator che legge da database indicizzato o RPC; deve supportare ordinamenti e filtri | Caricamento < 1s, paginazione server-side funzionante, link a `app/blocks/[id]` |
| Block detail | Vista approfondita blocco, includendo lista transazioni | **Input**: `GET /api/blocks/:hash` | Pagina con card riassuntiva (altezza, gas, difficulty) + tab transazioni + raw JSON | Deve arricchire dati RPC (`eth_getBlockByHash`) con informazioni su validatore e reward | Mostrare tutte le transazioni del blocco con link, gestione errori (blocchi non trovati) |
| Transaction list | Query globale delle transazioni recenti | **Input**: `GET /api/transactions?page&filters` | Tabella con status, valore, fee, mittente, destinatario | Richiede data-store ottimizzato o servizio indicizzato | Supporto filtri per indirizzo, intervallo blocchi e stato; esportazione CSV |
| Transaction detail | Dettaglio singola transazione (receipt + trace) | **Input**: `GET /api/transactions/:hash` | Sezioni: overview, logs/eventi, raw call data, grafico stato | Chiamate RPC `eth_getTransactionReceipt`, `debug_traceTransaction` (se supportato) | Mostra esito, errori, log decodificati (ABI). Gestisce transazioni pending |
| Account detail | Panoramica indirizzo (saldo, nonce, attività) | **Input**: `GET /api/accounts/:addr`, `GET /api/accounts/:addr/transactions` | Card bilancio + grafico attività + tab transazioni con paginazione | Richiede aggregator RPC + caching; eventuale servizio per internal tx | Visualizzare bilancio aggiornato, ENS (se supportato), indicatori di contratto/verificato |
| Search engine | Permette di incollare hash/indirizzo e reindirizzare | **Input**: query `GET /api/search?q` (client side) | Barra sempre disponibile nell’header, autosubmit | Metodo server che identifica tipo di input (block, tx, account) e ritorna redirect | Risposta < 500ms, messaggi chiari se l’elemento non esiste |
| Stats dashboard | KPI come TPS, gas medio, supply, nodi attivi | **Input**: `GET /api/stats` + `GET /api/barchart/:ts`, `GET /api/userchart` | Card riepilogo + grafici (componenti `components/chartDasboard`, `components/StatsDashboard`) | Servizio batch che calcola metriche e le cachea (Redis). Websocket per highlight live | Aggiornamento ogni 60s, fallback dati storici se API down |
| Websocket live updates | Notifiche real-time su blocchi e transazioni | **Input**: sottoscrizioni `wss://.../blocks`/`transactions` | Banner o ticker che mostra “New block” “New tx” e aggiorna liste | Gateway Node che ascolta provider RPC streaming, broadcasting via WebSocket | Latenza < 2s, auto-reconnect, backoff esponenziale |
| Wallet connection | Collegare wallet per funzionalità avanzate (bookmark, firma) | **Input**: provider EIP-1193 | Bottone “Connect Wallet” + stato utente | Integrazione client-side (es. `wagmi`, `ethers`). Nessun backend necessario se sola autenticazione | Supporta MetaMask e WalletConnect. Gli stati connesso/disconnesso devono essere persistenti |
| Error handling & observability | Messaging coerente e logging strutturato | Input: tutte le richieste | Alert user-friendly in UI, toast, fallback | Middleware server per log, correlazione requestId, rate limiting, Sentry | Nessun stack trace mostrato all’utente; logs centralizzati |
| Security layers | Protezione da abuso e dati sensibili | Input: query pubbliche | UI con sanitizzazione output, limitazione richieste | WAF / rate limit in `app/api/_middleware.ts`, validazione input estesa | Conformità OWASP Top 10, scansioni security automatizzate |

